<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <title>Bluppie Runner</title>
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fflate@0.8.0/umd/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/FBXLoader.js"></script>
</head>
<body>
    <!--<div id="splash-screen">
    <div class="bubble b1"></div>
    <div class="bubble b2"></div>
    <div class="bubble b3"></div>

    <div class="splash-content">
        <h1 class="logo-text">BLUPPIE<br><span>RUNNER</span></h1>
        
        <div id="loading-container">
            <div id="loading-bar-container">
                <div id="loading-bar"></div>
            </div>
            <p id="loading-text">YÃ¼kleniyor...</p>
        </div>

        <div id="tap-to-start" class="hidden">
            <div class="pulse-circle"></div>
            <p class="tap-text">BAÅžLAMAK Ä°Ã‡Ä°N DOKUN</p>
        </div>
    </div>
</div>-->
    <div id="game-container"></div>
    
    <div id="ui-layer">
        <header id="menu-header">
            <div class="profile-section">
                <div class="profile-pic">
                    <img src="https://placehold.co/40x40/00bfff/ffffff?text=B" alt="Profile">
                </div>
                <span class="username" id="username-display">@Loading...</span>
                <div id="ton-connect-btn" style="display:none;"></div> 
            </div>

            <div class="resources">
                <div class="res-box">
                    <span class="icon">ðŸ¥§</span>
                    <span id="total-turtle-count">0</span>
                </div>
            </div>
        </header>

        <div id="game-ui" class="hidden">
            <button id="btn-pause" class="game-btn">
                <i class="fa-solid fa-pause"></i>
            </button>

            <div class="game-stats-container">
                <div class="game-score-box">
                    <span id="in-game-score">00000</span>
                </div>
                <div class="game-coin-box">
                    <span id="in-game-turtles">0</span> <span class="icon">ðŸ¥§</span>
                </div>
            </div>
        </div>

        <div id="start-screen" class="main-menu">
            <div class="play-container">
                <button id="btn-start" class="btn-play">
                    <span>Play</span>
                </button>
            </div>

            <div class="sub-controls">
                <button class="btn-pill settings-btn">
                    <i class="fa-solid fa-gear"></i> Settings
                </button>
                <div class="btn-pill life-btn">
                    <i class="fa-solid fa-heart"></i> 
                    <span id="play-count">5</span>/5
                </div>
            </div>

            <nav class="bottom-nav">
                <div class="nav-item">
                    <i class="fa-solid fa-chart-simple"></i>
                    <span>Leaderboard</span>
                </div>
                <div class="nav-item active">
                    <i class="fa-solid fa-droplet"></i>
                    <span>Vault</span>
                </div>
                <div class="nav-item">
                    <i class="fa-solid fa-user-group"></i>
                    <span>Friends</span>
                </div>
            </nav>
        </div>

        <div id="pause-screen" class="modal hidden">
            <h2>DURAKLATILDI</h2>
            <button id="btn-resume" class="btn-play small">DEVAM ET</button>
            <button id="btn-quit" class="btn-pill" style="margin-top:10px; background:#555;">MENÃœYE DÃ–N</button>
        </div>

        <div id="game-over-screen" class="modal hidden">
            <h2>OYUN BÄ°TTÄ°</h2>
            <p>Skor: <span id="final-score">0</span></p>
            <p style="font-size:14px; color:#666;">Toplanan: <span id="final-turtles">0</span> ðŸ¥§</p>
            
            <div style="display: flex; gap: 10px; flex-direction: column; width: 100%;">
                <button id="btn-restart" class="btn-play small">TEKRAR DENE</button>
                <button id="btn-home" class="btn-pill" style="background: #555; justify-content: center; width: 100%; margin-top: 5px;">
                    <i class="fa-solid fa-house"></i> ANA MENÃœ
                </button>
            </div>
            
            <div class="shop-section" style="margin-top:20px; border-top: 1px solid #eee; padding-top: 15px;">
                <div id="nft-status" class="status-msg" style="color:#666; font-size: 12px; margin-bottom: 5px;">NFT Kontrol Ediliyor...</div>
                <button id="btn-buy-reset" class="btn-pill" style="background:#444; color:white; width:100%; justify-content: center;" disabled>
                    Can Yenile (0.05 TON)
                </button>
            </div>
        </div>
    </div>

    <audio id="bgm-menu" loop>
        <source src="menu.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="bgm-game" loop>
        <source src="game.mp3" type="audio/mpeg">
    </audio>

    <audio id="sfx-pop">
        <source src="pop.mp3" type="audio/mpeg">
    </audio>

    <script type="module" src="ton-service.js"></script>
    <script type="module" src="game/main.js"></script>
    <script type="module">
    import { GameState } from './game/core/gameState.js';

    const playBtn = document.getElementById('btn-start');
    const menu = document.getElementById('start-screen'); // menÃ¼ divâ€™inin idâ€™si

    if (playBtn) {
        playBtn.addEventListener('click', () => {
            GameState.isPlaying = true;

            if (menu) {
                menu.style.display = 'none';
            }

            if (window.unlockAudio) {
                window.unlockAudio();
            }

            console.log('GAME STARTED');
        });
    }
</script>

</body>
</html>
